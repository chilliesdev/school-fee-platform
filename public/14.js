(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{172:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),c=a(1),l=a.n(c),o=a(18),i=a(6),s=a(4),u=a.n(s),m=a(12),d=a(3),f=a(8),p=a(53);function h(e,t,a,n,r,c,l){try{var o=e[c](l),i=o.value}catch(e){return void a(e)}o.done?t(i):Promise.resolve(i).then(n,r)}function b(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var c=e.apply(t,a);function l(e){h(c,n,r,l,o,"next",e)}function o(e){h(c,n,r,l,o,"throw",e)}l(void 0)}))}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw c}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function y(e){var t,a=e.accessToken,n=e.userDetails,s=Object(o.c)(),u=s.register,m=s.handleSubmit,h=s.errors,E=Object(f.c)(),y=E.get,g=E.post,w=Object(i.g)(),k=v(Object(c.useState)({balance:0,today:0,month:0,all:0,account:{},payment:[],withdraw:[]}),2),j=k[0],O=k[1],N=v(Object(c.useState)(!1),2),S=N[0],T=N[1],x=j.account;Object(c.useEffect)((function(){A()}),[]);var A=function(){var e=b(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("/api/dashboard",a);case 3:t=e.sent,n=t.data,O(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();function D(e){T(!0),I(e)}var I=function(){var e=b(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/api/payment/withdraw",t,a);case 3:n=e.sent,c=n.data,console.log(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e){var t=[];return e.map((function(e){var a=e.id,n=(e.name,e.amount),r=e.created_at;if(e.label)t.push(e);else{var c={id:a,additionalData:[Object(f.e)("₦".concat(n)),r]};t.push(c)}})),t},_=function(e){var t=[];return e.map((function(e){var a=e.id,n=e.name,r=e.amount,c=e.created_at;if(e.label)t.push(e);else{var l={id:a,label:n,additionalData:[e.class,Object(f.e)("₦".concat(r)),c],button:"Invoice"};t.push(l)}})),t},C=function(){return l.a.createElement("div",{className:"withdrawal-list"},l.a.createElement(d.n,null,"Withdrawals"),l.a.createElement(d.f,{pagination:{status:!0,structure:P,accessToken:a},size:"sm",card:!0,listItems:j.withdraw}))},M=function(){return l.a.createElement("div",{className:"transaction-list"},l.a.createElement("div",{className:"heading"},l.a.createElement(d.n,null,"Latest Payment"),l.a.createElement(d.b,{classes:"sm",action:function(){return w.push("/dashboard/transaction")}},"MORE")),l.a.createElement(d.f,{pagination:{status:!0,structure:_,loadMoreDistructure:function(e){return e.payment},accessToken:a},listItems:j.payment,size:"lg"}))},W=function(e){return l.a.createElement("div",{className:"monitor"},l.a.createElement(d.n,null,"Transaction in Numbers"),l.a.createElement("div",{className:"card-group"},l.a.createElement(d.c,{figure:e.balance,prefix:"₦",thousand:!0,label:"balance"}),l.a.createElement(d.c,{figure:e.all,label:"all"}),l.a.createElement(d.c,{figure:e.today,label:"today"}),l.a.createElement(d.c,{figure:e.month,label:"this month"})))};return l.a.createElement(l.a.Fragment,null,"admin"===n.type?l.a.createElement(i.a,{from:"/dashboard",to:"/dashboard/school"}):l.a.createElement("div",{className:"dashboard"},l.a.createElement(d.k,null,l.a.createElement(d.l,null,"Dashboard"),l.a.createElement(d.i,{title:"Withdraw",disabled:!(Object.keys(x).length>0)||S,loading:S,handleClick:m(D)},l.a.createElement("div",{className:"withdraw-container"},Object.keys(x).length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(d.n,null,"Account Details"),l.a.createElement("p",null,x.name),l.a.createElement("p",null,x.bank_name),l.a.createElement("p",null,x.account_number),l.a.createElement("form",{className:"withdraw-form",onSubmit:m(D)},l.a.createElement(d.e,{rounded:!0,type:"number",name:"amount",handleChange:u({required:"Please add a valid amount"}),placeholder:"Amount",error:null===(t=h.amount)||void 0===t?void 0:t.message}))):l.a.createElement("p",{className:"bank-error"},l.a.createElement("span",null,l.a.createElement(p.a,null)),"Unable To Withdraw due to invalid account details please contact the Admin")))),l.a.createElement(d.j,null,l.a.createElement("div",{className:"grid lg"},l.a.createElement(W,j),l.a.createElement(M,null)),l.a.createElement("div",{className:"grid sm"},l.a.createElement(C,null)))))}y.propTypes={accessToken:u.a.string.isRequired},t.default=Object(m.b)((function(e){return{accessToken:e.auth.accessToken}}))(y)}}]);